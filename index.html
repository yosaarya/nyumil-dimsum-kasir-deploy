<!-- JavaScript Files -->
<script src="js/utils.js"></script>
<script src="js/database.js"></script>
<script src="js/kasir.js"></script>
<script src="js/statistik.js"></script>
<script src="js/chart.js"></script>
<script src="js/app.js"></script>

<!-- Simple Initialization Script -->
<script>
// Initialize everything when page loads
window.addEventListener('DOMContentLoaded', function() {
    console.log('DOM loaded, initializing app...');
    
    // Initialize database first
    if (typeof database !== 'undefined' && typeof database.init === 'function') {
        database.init().then(() => {
            console.log('Database initialized');
            
            // Initialize kasir
            if (typeof initKasir === 'function') {
                initKasir();
            }
            
            // Initialize statistics
            if (typeof initStatistik === 'function') {
                initStatistik();
            }
            
            // Initialize app
            if (typeof app !== 'undefined' && typeof app.init === 'function') {
                app.init();
            }
            
            console.log('Application fully loaded');
        }).catch(error => {
            console.error('Failed to initialize:', error);
        });
    }
});

// Global error handler
window.addEventListener('error', function(e) {
    console.error('Global error:', e.error);
    alert('Terjadi kesalahan pada aplikasi. Silakan refresh halaman.');
});

// Online/offline detection
window.addEventListener('online', function() {
    console.log('App is online');
    if (typeof showNotification === 'function') {
        showNotification('Koneksi internet tersedia', 'success');
    }
});

window.addEventListener('offline', function() {
    console.log('App is offline');
    if (typeof showNotification === 'function') {
        showNotification('Tidak ada koneksi internet', 'warning');
    }
});
</script>
